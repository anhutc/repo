$(()=>{let a;for(let c of location.search.substring(1).split("&")){var b=c.split("=");"p"==decodeURIComponent(b[0])&&(a=decodeURIComponent(b[1]))}if(a){let e="";console.log("G\xf3i: "+a);var d=location.href.split("/").slice(0,-2).join("/")+"/"+a;$.ajax({type:"GET",url:d+"/info.xml",dataType:"xml"}).done(b=>{console.log("B\u1EAFt \u0111\u1EA7u ph\xe2n t\xedch c\xfa ph\xe1p XML."),$(b).find("packageInfo").each(function(){document.title="Nh\u1EADt k\xfd thay \u0111\u1ED5i c\u1EE7a "+$(this).find("name").text().trim(),$(b).find("change").each(function(){let a=$(this).find("changeVersion").text().trim();e+="<li><h1>"+a+' <span id="'+a.replaceAll(".","")+'"></span></h1>',$(this).find("changeDescription").each(function(){e+="<h2>- "+$(this).text().trim()+"</h2>"}),e+="</li>"}),$("#changelog").append(e)}),$(b).find("packageInfo").each(function(){$(b).find("change").each(function(){let b=$(this).find("changeVersion").text().trim();lastUpdateDate("https://api.github.com/repos/anhutc/repo/commits?path=debs/"+a+"_"+b.replace("v","").trim()+"_iphoneos-arm.deb").then(a=>$("#"+b.replaceAll(".","")).append("- ("+a+")")).catch(a=>console.error(a))})}),console.log("\u0110\xe3 ho\xe0n th\xe0nh ph\xe2n t\xedch c\xfa ph\xe1p XML.")}).fail(()=>{$("#changelog").append('Package "'+a+'" kh\xf4ng t\xecm th\u1EA5y. Tham s\u1ED1 kh\xf4ng ch\xednh x\xe1c ho\u1EB7c kh\xf4ng c\xf3 m\xf4 t\u1EA3 cho g\xf3i n\xe0y.')})}else console.log("G\xf3i kh\xf4ng \u0111\u01B0\u1EE3c t\xecm th\u1EA5y. H\u1EE7y b\u1ECF.")}),$("img").bind("dragstart",()=>!1),$("img").bind("mousedown",()=>!1);let updateDatesDict={};function lastUpdateDate(a){function b(a){return new Promise((c,d)=>{let b=new XMLHttpRequest;b.onload=()=>{200==b.status&&4==b.readyState&&c(b.response),d(b.status)},b.onerror=()=>d(b.status),b.open("GET",a),b.send()})}return new Promise((c,e)=>{if(a in updateDatesDict)console.log("S\u1EED d\u1EE5ng gi\xe1 tr\u1ECB \u0111\u01B0\u1EE3c l\u01B0u trong b\u1ED9 nh\u1EDB cache cho url "+a+" ("+updateDatesDict[a]+")"),c(updateDatesDict[a]);else{let f=0,d=()=>{b(a).then(e=>{b(String(a).replace("mmits?path=","ntents/").concat("?ref=",JSON.parse(e)[f].sha)).then(g=>{let b=new Date(JSON.parse(e)[f].commit.author.date);console.log("Ng\xe0y t\xecm n\u1EA1p th\xe0nh c\xf4ng cho url: "+a+" ("+b+")");var d=b.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});updateDatesDict[a]=d,c(d)}).catch(b=>{f++,console.warn("Th\u1EED l\u1EA1i cu\u1ED9c g\u1ECDi v\u1EDBi cam k\u1EBFt "+f+" cho url "+a),d()})}).catch(a=>{e("L\u1ED7i khi nh\u1EADn gi\xe1 tr\u1ECB sha ("+a+")")})};d()}})}